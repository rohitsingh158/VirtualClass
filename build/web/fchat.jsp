<%@page import="java.util.StringTokenizer"%><%@page import="java.util.Iterator"%><%@page import="java.util.HashMap"%><%    HashMap facultyInfo=(HashMap)session.getAttribute("facultyInfo");    if(facultyInfo!=null){%><html>	<head>				<!-- Website Title & Description for Search Engine purposes -->		<title></title>		<meta name="description" content="">				<!-- Mobile viewport optimized -->		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">				<!-- Bootstrap CSS -->		<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">		<link href="bootstrap/css/bootstrap-glyphicons.css" rel="stylesheet">    <link href="DataTables/datatables.min.css" rel="stylesheet"/>  		<link href="includes/css/jquery.multiselect.css" rel="stylesheet" type="text/css">				<!-- Custom CSS -->		<link href="includes/css/styles.css" rel="stylesheet">				<!-- Include Modernizr in the head, before any other Javascript -->		<script src="includes/js/modernizr-2.6.2.min.js"></script>			</head>	<body>		<div class="bg">    	<div class="header">            <div class="container  text-center">                <a class="logo-hyper" href="faculty.jsp"><b>Virtual Class</b></a>            </div>        </div>        <div class="container ">        	<div class="row">            	<div class="menu col-md-12 ">                	<div class="menu1 pull-left">                    	<a href='fchat.jsp'>Chat</a> &nbsp;&nbsp;&nbsp;&nbsp;                        <a href='supload.jsp'>Student Uploads</a>&nbsp;&nbsp;&nbsp;&nbsp;                        <a href='faculty.jsp'>Notice</a>&nbsp;&nbsp;&nbsp;&nbsp;                        <a href='Logout'>Logout</a>                    </div>                    <div class="menu1 pull-right">                    	<p>Welcome &nbsp;&nbsp; <b><%=facultyInfo.get("name")%></b></p>                    </div>                </div>            </div>           <%                String msg=(String)session.getAttribute("msg");                if(msg!=null)                  {            %>            <div class="panel panel-primary">                <div class="panel-heading text-center">                    <p><%=msg%></p>                </div>            </div>            <%                session.setAttribute("msg", null);                }            %>                               	<div class="notice-table col-md-8 pull-left">                  <h4 class="text-center">Faculty Chat</h4><hr/>               <%                   String name=(String)facultyInfo.get("name");                   String fid=(String)facultyInfo.get("fid");                db.DbConnection db=new db.DbConnection();                java.util.ArrayList allChat =db.getChat(name, fid);                Iterator i=allChat.iterator();                while(i.hasNext()){                    HashMap chat= (HashMap)i.next();                    String n="";                    HashMap faculty=db.getFaculty((String)chat.get("sid"));                    if(faculty!=null){                        n=(String)faculty.get("name");                    }                    HashMap student=db.getStudent((String)chat.get("sid"));                    if(student!=null){                        n=(String)student.get("name");                    }               %>               Sender : <b><%=n%></b> &nbsp;&nbsp;&nbsp;&nbsp; Reciever : <b><%=chat.get("rid")%></b> &nbsp;&nbsp;&nbsp;&nbsp; Date: <b><%=chat.get("mdate")%></b><br/>                Message: <b><%=chat.get("msg")%></b><br/><hr/>                <%                    }                  %>                </div>                <div class=" col-sm-4 pull-right">                	<div class="box">                    	<h5 class="text-center"> New Chat</h5>                        <br>                        <form action="ChatPro"  method="post" data-toggle="validator" class="form-horizontal" role="form">              			<input type="hidden" name="sid" value="<%=fid%>"/>                            <div class="form-group">                                <div class="col-sm-10 col-sm-offset-1">                                  <input type="text" class="form-control" name="m" placeholder="Message" required>                                </div>                            </div>                            <div class="form-group">                                <div class="col-sm-10 col-sm-offset-1">                                	<select name="r" multiple class="form-control" required>				<%                                    String course=db.getFacultyCourse(fid);                                     System.out.println(course);                                    StringTokenizer st=new StringTokenizer(course,",");                                    while(st.hasMoreTokens()){                                        String c=st.nextToken();                                    java.util.ArrayList allStudent=db.getAllStudentByCourse(c);                                    Iterator it=allStudent.iterator();                                    while(it.hasNext()){                                        HashMap student=(HashMap)it.next();                                %>                                                                      <option value="<%=student.get("name")%>"><%=student.get("name")%>  </option>                              <%                              }                            }                              %>                                    </select>                                                             	</div>                            </div>                                                        <div class="form-group">                                 <div class="col-sm-offset-1 col-sm-10">                                  <button type="submit" class="btn btn-primary">Submit</button>                                </div>                            </div>                        </form>                    </div>                </div>            </div>                    </div>        <div class="footer">            <div class="container text-center">                 Design & Develop By Rohit Singh, Himanshu Singh,Bharti Singh            </div>        </div>    </div>	  <script type="text/javascript" src="js/jquery-2.2.2.min.js"></script>  <script src="DataTables/datatables.min.js"></script>  <script src="bootstrap/js/bootstrap.min.js"></script>  <script src="includes/js/validator.js"></script>  <script src="includes/js/jquery.multiselect.js"></script>    <script type="text/javascript">      $(document).ready(function() {      $('#mydata').dataTable();    });    $('select[multiple]').multiselect({        columns: 2,        placeholder: 'Select'    });  </script>		</body></html><%}else{        session.setAttribute("msg","Please Login First!!");        response.sendRedirect("index.jsp");    } %>